# 更新日志

本文档记录了单词筛选工具的所有版本更新内容。

## [v1.1.2] - 2025-05-30

### 功能增强
- **规则示例区交互优化**：全面提升规则管理器示例区的用户体验
  - 新增"收缩/展开全部"按钮，支持一键操作所有示例区域
  - 实现智能响应式设计：当屏幕从宽屏切换到窄屏（≤768px）时自动收缩所有示例
  - 优化视觉布局：将示例间的垂直间距调整为0，提供更紧凑的显示效果
  - 修正示例内容错误：将"四字母及以上单词"示例中的三字母单词替换为符合规则的四字母单词
  - 智能状态同步：按钮文本根据当前示例展开/收缩状态自动更新
  - 保持持久化存储：用户的展开/收缩偏好设置在页面刷新后仍然保持

### 技术改进
- **JavaScript功能扩展**：
  - 新增`toggleAllExamples()`函数实现批量操作
  - 新增`updateToggleAllButtonText()`函数实现状态同步
  - 新增`handleResponsiveExamples()`函数实现响应式自动收缩
  - 新增`collapseAllExamples()`函数专门处理自动收缩逻辑
  - 添加窗口大小监听器，实时响应屏幕尺寸变化

### 用户体验提升
- **移动端优化**：在小屏设备上自动收缩示例，节省屏幕空间
- **操作便捷性**：一键操作替代逐个点击，提升操作效率
- **视觉一致性**：按钮样式与现有界面风格保持统一

## [v1.1.1] - 2025-05-30

### 界面优化
- **规则示例重构**：完全重新设计规则管理器中的示例展示格式
  - 调整示例顺序，将"四字母及以上单词"示例移至首位，更符合学习顺序
  - 统一使用"功能"、"语法"、"集合"、"示例"等标准化字段，提升信息结构化程度
  - 为每个规则添加具体的单词示例（如cat, dog, run, big等），便于理解和验证
  - 实现完整的代码语法高亮系统：
    - 注释行显示为绿色（#开头）
    - 集合定义显示为粉色（如BL=={...}）
    - 匹配规则显示为蓝色（如!LLLL）
    - 显示指令显示为黄色（@符号）
  - 采用深色代码背景（#2d3748），配合浅色文字，提升代码可读性
  - 优化代码布局，每行独立显示，使用等宽字体，增强视觉效果

### 用户体验提升
- **示例内容丰富化**：每个规则示例都包含8个具体单词，涵盖不同难度和类型
- **视觉层次优化**：使用粗体字段标签、适当的行间距和缩进，提升信息层次感
- **语法说明完善**：保留并优化重要的语法提示和注释，帮助用户掌握规则编写技巧
- **操作符展示增强**：组合规则中的&&、||、--操作符保持淡黄色背景，便于识别

### 技术改进
- **代码结构优化**：示例代码使用div结构替代纯文本，支持更丰富的样式控制
- **响应式设计**：确保新的示例格式在不同屏幕尺寸下都有良好的显示效果
- **可维护性提升**：标准化的字段结构便于后续示例的添加和修改

---

## [v1.1.0] - 2025-05-30

### 重大更新
- **项目整理**：清理了不必要的测试文件和临时文档，提升项目结构清晰度
  - 删除了 `test-non-operator.html` 测试页面（功能已集成到主应用）
  - 删除了 `docs/临时/` 文件夹及其中的 `.mht` 文件
  - 保留了 `debug.html` 作为开发调试工具

### 文档完善
- **开发实施计划更新**：标记已完成的核心功能，包括筛选结果预处理、规则注释和组合规则非模式
- **需求分析文档更新**：更新功能完成状态，为后续开发提供清晰的路线图
- **版本信息整理**：完善版本历史记录，提供详细的功能演进轨迹

### 已完成的核心功能总结
- ✅ **筛选结果预处理（删除）功能**：完整的单词删除、恢复和批量操作系统
- ✅ **规则注释功能**：支持60字符规则注释，大幅提升规则管理体验
- ✅ **组合规则非模式**：支持"--"操作符，实现"满足A但不满足B"的复杂逻辑
- ✅ **导出信息增强**：导出文件包含完整的源文件和规则信息，提升可追溯性

### 技术债务清理
- 移除了冗余的测试文件，减少项目维护负担
- 整理了文档结构，提升开发效率
- 为后续版本开发奠定了清晰的基础

---

## [v1.0.4] - 2025-05-30

### 新增功能
- **规则注释功能**：为筛选规则添加描述性注释，大幅提升规则管理体验
  - 在规则编辑器中新增注释输入框，支持最多60字符的注释
  - 规则列表中以优雅样式显示注释信息（淡蓝色边框，浅灰色背景）
  - 主页面规则选择下拉框显示注释预览（超过20字符自动截取并添加省略号）
  - 编辑规则时自动填入现有注释内容
  - 导出/导入规则功能完整支持注释信息
  - 注释采用 `//` 前缀，符合代码注释的视觉习惯

### 技术改进
- 扩展规则数据结构，新增 `comment` 字段
- 优化规则解析逻辑，支持注释行的识别和处理
- 完善文件存储功能，确保注释信息的完整保存和加载

---

## [v1.0.3] - 2025-05-30

### 核心功能
- **筛选结果预处理功能**：实现了完整的单词删除、恢复和清除功能
- 每个筛选结果单词旁添加删除/恢复按钮，支持精确的单词级操作
- 批量操作功能：全部删除、全部恢复、清除已删除单词
- 实时统计更新：动态显示已删除单词数量和有效单词数量
- 智能导出：导出时自动排除已删除单词，确保结果准确性

### UI/UX优化
- 修正预览区按钮间距问题：优化删除类与导出类按钮的分类间距
- 按钮颜色语义化：统一删除类按钮为灰色，编辑类按钮为蓝色，帮助类按钮为绿色
- 提升用户界面的可用性和视觉一致性

### 技术实现
- 新增deletedWords Set数据结构，高效管理删除状态
- 实现toggleWordDelete、deleteAllWords、restoreAllWords、clearDeleted等核心方法
- 扩展getActiveWords方法，支持获取有效（未删除）单词列表
- 优化消息提示系统，提供操作反馈

## [v1.0.2] - 2025-05-30

### 新增功能
- 导出信息增强：在导出文件头部添加完整的源文件信息、筛选规则信息和生成时间
- 支持TXT和Excel两种格式的头部信息显示
- 增强导出文件的可追溯性，便于用户管理和识别导出结果

### 功能优化
- 新增规则显示名称获取功能，导出时显示规则的友好名称
- 导出文件格式标准化，包含源文件名、总单词数、筛选规则、结果数量和生成时间
- Excel导出时调整列宽以适应头部信息显示

### 技术改进
- 扩展FileUtils的exportToText和exportToExcel方法，支持可选的导出信息参数
- 新增generateExportHeader方法，生成标准化的文件头部信息
- 在RuleEngine中添加getRuleName方法，获取规则的显示名称
- 保持向后兼容性，所有新增参数均为可选

### 导出格式示例
```
源文件：example.txt (总单词数：1000)
筛选规则：CVC规则 (筛选结果：500个单词)
生成时间：2025-05-30 14:30:25
===================================================
```

## [v1.0.1] - 2025-05-30

### 新增功能
- 导出功能增加文件保存路径选择，支持用户自定义保存位置和文件名
- 使用现代浏览器File System Access API提升用户体验
- 兼容性降级方案，确保在不支持新API的浏览器中正常工作

### 功能优化
- 优化用户取消导出操作时的提示逻辑，避免误导性成功提示
- 规则管理页面按钮布局优化，将导入导出按钮移至规则管理区域
- 修复导入规则数据持久化问题，确保导入的规则正确保存到localStorage

### 技术改进
- 完善错误处理机制，区分用户取消操作和实际错误
- 统一导出功能的异步处理逻辑
- 改进文件操作的用户体验和稳定性

### 涵盖的导出功能
- 主页导出为TXT文件
- 主页导出为Excel文件
- 主页导出规则文件
- 管理页导出规则文件

## [v1.0.0] - 2025-05-30

### 初始版本功能
- 支持自定义规则创建和管理
- 支持局部集合和全局集合定义
- 支持复杂的单词匹配模式（CVC、位置标记等）
- 支持文本文件上传和单词筛选
- 支持筛选结果排序和导出
- 独立的规则管理页面
- 规则导入导出功能
- 响应式设计，支持移动端
- 本地存储支持，数据持久化