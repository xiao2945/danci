# 可视化规则管理中心功能详细文档

## 概述

可视化规则管理中心是单词筛选工具的规则创建和管理界面，通过rule-manager.html页面实现。该系统将复杂的规则语法转化为直观的可视化操作，为用户提供从入门到精通的渐进式学习体验。

## 核心功能架构

### 1. 双面板设计架构

#### 1.1 规则示例面板（左侧）
**设计理念：** 通过丰富的示例引导用户学习规则语法

**面板结构：**
```
规则示例面板
├── 示例分类导航
├── 示例内容展示区
│   ├── 规则代码区
│   ├── 功能说明区
│   └── 语法要点区
└── 示例操作区
    ├── 复制到编辑器
    ├── 收缩/展开控制
    └── 快速测试
```

#### 1.2 规则编辑面板（右侧）
**设计理念：** 提供专业的规则编辑环境和实时反馈

**面板结构：**
```
规则编辑面板
├── 规则编辑器
│   ├── 语法高亮
│   ├── 实时验证
│   └── 智能提示
├── 快速语法帮助
├── 规则预览区
└── 操作按钮组
    ├── 保存规则
    ├── 测试规则
    ├── 清空编辑器
    └── 格式化代码
```

### 2. 示例库系统

#### 2.1 示例分类体系
**基础示例类别：**

**1. 长度限制示例**
- **规则名称：** 四字母及以上单词
- **核心语法：** `\bLLLL\e` （开头+四个字母+结尾）
- **语法要点：** \b和\e位置标记的使用
- **教学重点：** 位置约束的概念

**2. CVCE模式示例**
- **规则名称：** 辅音-元音-辅音-e结构
- **核心语法：** `\b(C)(V)(C)[e]\e`
- **语法要点：** 集合引用与字面字符的区别
- **教学重点：** [e]表示字面字符e的用法

**3. 双辅音开头示例**
- **规则名称：** 双辅音开头单词
- **核心语法：** `\b(BL)` （自定义集合的使用）
- **语法要点：** 局部集合定义和引用
- **教学重点：** 自定义集合的创建方法

**4. 组合规则示例**
- **规则名称：** 复杂逻辑组合
- **核心语法：** `::rule1 AND rule2 OR NOT rule3`
- **语法要点：** 逻辑运算符的使用
- **教学重点：** 组合规则的构建方法

#### 2.2 示例展示机制
**响应式展示：**
- **宽屏模式**：默认展开所有示例内容
- **窄屏模式**：默认收缩，节省屏幕空间
- **用户控制**：支持手动收缩/展开切换

**内容组织：**
```
示例标题（可点击收缩/展开）
├── 规则代码区（语法高亮）
├── 匹配模式说明
├── 语法要点解释
├── 注意事项提醒
└── 操作按钮
    ├── 复制到编辑器
    └── 快速测试
```

#### 2.3 语法要点标注
**重点标记系统：**
- **红色标记**：关键语法元素（如\b、\e、[e]等）
- **代码高亮**：规则代码的语法着色
- **注释说明**：详细的语法解释

### 3. 智能规则编辑器

#### 3.1 编辑器核心功能
**语法高亮：**
- 位置标记高亮（\b、\e）
- 集合引用高亮（(集合名)）
- 字面字符高亮（[字符]）
- 逻辑运算符高亮（AND、OR、NOT）

**实时验证：**
```
用户输入 → 语法解析 → 错误检测 → 实时反馈
```

**智能提示：**
- 集合名称自动补全
- 语法错误实时提示
- 格式建议提供

#### 3.2 代码格式化功能
**格式化规则：**
- 自动缩进调整
- 空行规范化
- 注释对齐
- 集合定义美化

**格式化触发：**
- 手动格式化按钮
- 保存时自动格式化
- 从示例复制时自动格式化

#### 3.3 规则预览系统
**预览内容：**
```
规则预览
├── 规则名称
├── 规则注释
├── 全局集合定义
├── 局部集合定义
├── 具体规则内容
└── 排序规则（如有）
```

**实时更新：**
- 编辑器内容变化时自动更新
- 语法错误时显示错误信息
- 成功解析时显示完整预览

### 4. 规则库管理系统

#### 4.1 已保存规则展示
**列表式展示：**
```
规则项目
├── 规则名称（可点击展开）
├── 规则注释
├── 创建/修改时间
└── 操作按钮组
    ├── 编辑
    ├── 复制
    ├── 删除
    └── 测试
```

**展开式详情：**
- 点击规则名称展开详细代码
- 格式化显示规则内容
- 支持代码复制功能

#### 4.2 拖拽排序功能
**排序机制：**
- 鼠标拖拽重新排列
- 实时视觉反馈
- 自动保存排序状态

**同步机制：**
- 与主页面规则选择器同步
- 排序状态持久化存储
- 跨页面状态一致性

#### 4.3 规则操作功能
**基础操作：**
- **编辑**：加载到编辑器进行修改
- **复制**：创建规则副本
- **删除**：移除规则（含确认机制）
- **测试**：快速验证规则效果

**批量操作：**
- 多选规则支持
- 批量删除功能
- 批量导出功能

### 5. 快速语法帮助系统

#### 5.1 语法参考面板
**内容组织：**
```
语法帮助
├── 基础语法
│   ├── 位置标记
│   ├── 集合引用
│   └── 字面字符
├── 高级语法
│   ├── 集合运算
│   ├── 逻辑组合
│   └── 排序规则
└── 常用示例
    ├── 快速模板
    └── 语法片段
```

#### 5.2 交互式帮助
**帮助触发：**
- 悬停提示
- 点击详细说明
- 上下文相关帮助

**帮助内容：**
- 语法说明
- 使用示例
- 常见错误
- 最佳实践

### 6. 规则测试与验证

#### 6.1 实时验证机制
**验证流程：**
```
规则输入 → 语法解析 → 语义检查 → 错误报告 → 用户反馈
```

**验证内容：**
- 语法正确性
- 集合引用完整性
- 循环引用检测
- 名称冲突检查

#### 6.2 规则测试功能
**测试方式：**
- 内置测试词汇
- 用户自定义测试词
- 批量测试功能

**测试结果：**
- 匹配结果展示
- 性能统计信息
- 错误诊断报告

### 7. 用户体验优化

#### 7.1 响应式设计
**屏幕适配：**
- 桌面端：双面板并排布局
- 平板端：可切换面板显示
- 手机端：单面板堆叠布局

**交互优化：**
- 触摸友好的按钮设计
- 手势操作支持
- 键盘快捷键支持

#### 7.2 学习曲线优化
**渐进式学习：**
```
入门阶段 → 示例学习 → 模仿练习 → 独立创建 → 高级应用
```

**学习辅助：**
- 从简单到复杂的示例排序
- 详细的语法解释
- 常见错误提示
- 最佳实践建议

#### 7.3 操作便利性
**快捷操作：**
- 一键复制示例到编辑器
- 快速格式化功能
- 自动保存机制
- 撤销/重做支持

## 用户交互流程图

```
用户进入规则管理页面
    ↓
浏览示例面板
    ├── 查看示例代码
    ├── 理解语法要点
    └── 复制到编辑器
    ↓
规则编辑器操作
    ├── 修改规则内容
    ├── 实时语法验证
    ├── 查看规则预览
    └── 格式化代码
    ↓
规则测试验证
    ├── 语法检查
    ├── 功能测试
    └── 错误修正
    ↓
保存规则
    ├── 规则名称设置
    ├── 注释添加
    └── 保存到规则库
    ↓
规则库管理
    ├── 查看已保存规则
    ├── 拖拽排序
    ├── 编辑/删除操作
    └── 导入/导出功能
```

## 使用建议与最佳实践

### 1. 新手入门建议
**学习路径：**
- 从示例面板的基础语法开始
- 逐步学习集合定义和引用
- 练习简单的组合规则
- 掌握排序规则语法

**操作技巧：**
- 充分利用一键复制功能
- 使用实时验证及时发现错误
- 保存常用规则到规则库

### 2. 高效编辑技巧
**编辑器使用：**
- 利用语法高亮快速定位问题
- 使用自动格式化保持代码整洁
- 善用撤销/重做功能

**规则组织：**
- 为规则添加清晰的注释
- 使用有意义的规则名称
- 按功能分类管理规则库

### 3. 调试与优化
**错误排查：**
- 关注实时验证的错误提示
- 使用测试功能验证规则效果
- 分步构建复杂规则

**性能考虑：**
- 避免过度复杂的嵌套规则
- 合理使用集合引用
- 定期清理无用规则

### 4. 团队协作建议
**规则标准化：**
- 建立统一的命名规范
- 制定规则注释标准
- 定期整理和归档规则

**知识分享：**
- 导出优秀规则供团队学习
- 建立规则最佳实践文档
- 定期进行规则语法培训

该系统通过直观的可视化界面和丰富的学习资源，大大降低了规则创建的门槛，让用户能够快速掌握并熟练运用复杂的规则语法。