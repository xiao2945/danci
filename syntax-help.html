<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>详细语法帮助 - 单词筛选工具</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .syntax-help-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .syntax-help-container {
                padding: 10px !important;
                max-width: 100% !important;
            }
        }

        .syntax-help-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .syntax-help-content {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .syntax-help-content {
                padding: 20px !important;
            }
        }

        .syntax-help-content h1 {
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        .syntax-help-content h2 {
            color: #4a5568;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .syntax-help-content h3 {
            color: #2d3748;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .syntax-help-content h4 {
            color: #4a5568;
            margin-top: 25px;
            margin-bottom: 12px;
        }

        .syntax-help-content ul,
        .syntax-help-content ol {
            /* margin-bottom: 15px; */
            padding-left: 25px;
        }

        .syntax-help-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .syntax-help-content table th,
        .syntax-help-content table td {
            padding: 12px;
            text-align: left;
            border: 1px solid #e2e8f0;
        }

        .syntax-help-content table th {
            background: #f7fafc;
            font-weight: 600;
            color: #2d3748;
        }

        .syntax-help-content tr:hover {
            background: #f7fafc;
        }

        .syntax-help-content code {
            background: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #2d3748;
            font-size: 0.9em;
            word-break: break-all;
            white-space: pre-wrap;
        }

        .syntax-help-content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            position: relative;
        }

        .syntax-help-content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4a5568;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s ease;
        }

        .syntax-help-content pre .copy-btn:hover {
            background: #667eea;
        }

        .syntax-help-content .note {
            background: #ebf8ff;
            border-left: 4px solid #3182ce;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .comment {
            color: #68d391;
        }

        .syntax-help-content pre .rule-name {
            color: #f6e05e;
        }

        .syntax-help-content pre .set-definition {
            color: #63b3ed;
        }

        .syntax-help-content pre .rule-content {
            color: #fbb6ce;
        }

        .syntax-help-content pre .sort-rule {
            color: #f6ad55;
        }

        /* 表格包装器样式 */
        .table-wrapper {
            overflow-x: auto;
            margin: 15px 0;
        }

        /* 响应式表格样式 */
        @media (max-width: 768px) {
            .syntax-help-content table {
                font-size: 14px;
            }

            /* 基本语法表格 */
            .basic-syntax-table td:nth-child(1),
            .basic-syntax-table td:nth-child(2) {
                white-space: nowrap;
            }

            /* 集合运算符表格特殊处理 */
            .operator-table {
                width: 100%;
                table-layout: fixed;
            }

            .operator-table th,
            .operator-table td {
                padding: 8px 4px;
                vertical-align: middle;
            }

            .operator-table th:nth-child(1),
            .operator-table td:nth-child(1) {
                width: 15%;
                min-width: 36px;
                max-width: 60px;
                white-space: nowrap;
                text-align: center;
                font-size: 1em;
            }

            .operator-table th:nth-child(2),
            .operator-table td:nth-child(2) {
                width: 15%;
                min-width: 36px;
                word-break: break-word;
                white-space: normal;
                line-height: 1.3;
            }

            .operator-table th:nth-child(3),
            .operator-table td:nth-child(3) {
                width: 35%;
                word-break: break-word;
                white-space: normal;
            }

            .operator-table th:nth-child(4),
            .operator-table td:nth-child(4) {
                width: 35%;
                word-break: break-word;
                white-space: normal;
            }

            @media (max-width: 768px) {

                .operator-table th,
                .operator-table td {
                    padding: 8px 4px;
                    font-size: 14px;
                }
            }

            @media (max-width: 480px) {

                .operator-table th,
                .operator-table td {
                    padding: 4px 2px;
                    font-size: 12px;
                }

                .operator-table th:nth-child(1),
                .operator-table td:nth-child(1) {
                    min-width: 24px;
                    font-size: 11px;
                }

                .operator-table th:nth-child(2),
                .operator-table td:nth-child(2) {
                    min-width: 24px;
                    font-size: 11px;
                }
            }
        }

        @media (max-width: 600px) {

            .operator-table th,
            .operator-table td {
                padding: 6px 2px;
                font-size: 13px;
            }

            .operator-table th:nth-child(1),
            .operator-table td:nth-child(1) {
                width: 28px;
                min-width: 28px;
                font-size: 12px;
            }
        }

        @media (max-width: 360px) {

            .operator-table th,
            .operator-table td {
                font-size: 10px;
                padding: 3px 1px;
            }

            .operator-table th:nth-child(1),
            .operator-table td:nth-child(1) {
                width: 18px;
                min-width: 18px;
                font-size: 9px;
            }
        }

        .back-btn {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        .back-btn:hover {
            background: #5a67d8;
            color: white;
        }
    </style>
</head>

<body>
    <div class="syntax-help-container">
        <div class="syntax-help-content">
            <h1>详细语法帮助</h1>

            <h2>1. 基本语法</h2>

            <div style="overflow-x: auto;">
                <table class="basic-syntax-table">
                    <thead>
                        <tr>
                            <th style="width: 20%;">默认顺序</th>
                            <th style="width: 30%;">语法格式</th>
                            <th style="width: 50%;">说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>1. 规则名定义</strong></td>
                            <td><code>#规则名</code></td>
                            <td>定义规则名称（必须，以<code>#</code>开头）</td>
                        </tr>
                        <tr>
                            <td><strong>2. 注释内容</strong></td>
                            <td><code>//注释内容</code></td>
                            <td>添加规则注释（可选，以<code>//</code>开头）</td>
                        </tr>
                        <tr>
                            <td><strong>3. 局部集合定义</strong></td>
                            <td><code>集合名=={元素1,元素2,...}</code></td>
                            <td>定义局部集合，示例：<code>BL=={bl,br,cl,cr...}</code>（可选）</td>
                        </tr>
                        <tr>
                            <td><strong>4. 匹配模式</strong></td>
                            <td><code>:筛选规则</code></td>
                            <td>定义匹配模式（必须，以<code>:</code>或<code>::</code>开头）</td>
                        </tr>
                        <tr>
                            <td><strong>5. 排序规则</strong></td>
                            <td><code>@排序规则</code></td>
                            <td>定义排序方式（可选，以<code>@</code>或<code>@@</code>开头）</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h2>2. 集合相关</h2>

            <h3>2.1 集合定义</h3>

            <p><strong>语法格式</strong>：<code>集合名=={元素1,元素2,...}</code></p>

            <h4>2.1.1 命名规则</h4>
            <ul>
                <li>单字母集合名必须大写。（如：C、V、L）</li>
                <li>多字母集合名必须以字母开头，可包含字母和数字，且大小写敏感。（如：BL、Vowels）</li>
            </ul>

            <h4>2.1.2 元素规则</h4>
            <ul>
                <li>使用逗号<code>,</code>分隔集合中的元素。</li>
                <li>逗号前的空位置表示空元素。（如：<code>{,a}</code>、<code>{a,,b}</code>表示包含空元素）</li>
                <ul>
                    <li><strong>注意：</strong>虽然支持空字符，但不支持纯白字符，如空格、制表符、换行符。</li>
                </ul>
                <li>集合元素大小写敏感。</li>
            </ul>

            <h3>2.2 全局集合</h3>

            <p>可以在筛选规则中直接引用，无需另行定义。</p>

            <h4>2.2.1 默认全局集合（无法删除）</h4>
            <ul>
                <li><code>C=={b,c,d,f,g,h,j,k,l,m,n,p,q,r,s,t,v,w,x,y,z}</code> - 辅音字母</li>
                <li><code>V=={a,e,i,o,u}</code> - 元音字母</li>
                <li><code>L=={a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}</code> - 所有字母</li>
            </ul>

            <h4>2.2.2 自定义全局集合（可以删除）</h4>
            <p>可在"全局集合定义"功能中更新全局集合。</p>

            <h3>2.3 局部集合</h3>

            <ul>
                <li>仅在当前规则中可用，必须先定义后使用。</li>
                <li>当局部集合和全局集合同名时，局部集合会覆盖全局集合。</li>
            </ul>

            <h3>2.4 集合运算符</h3>

            <div class="table-wrapper">
                <table class="operator-table">
                    <thead>
                        <tr>
                            <th style="width: 12%;">符号</th>
                            <th style="width: 12%;">名称</th>
                            <th style="width: 26%;">描述</th>
                            <th style="width: 50%;">示例</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>==</code></td>
                            <td><strong>别名定义</strong></td>
                            <td>给集合定义一个别名</td>
                            <td><code>X==V</code>（定义X为V的别名，即X=={a,e,i,o,u}）</td>
                        </tr>
                        <tr>
                            <td><code>&gt;&gt;</code></td>
                            <td><strong>集合减法</strong></td>
                            <td>从集合中去掉另一个集合的内容</td>
                            <td><code>Y==L&gt;&gt;C</code>（从L中去掉C的内容，结果Y=={a,e,i,o,u}）</td>
                        </tr>
                        <tr>
                            <td><code>&lt;&lt;</code></td>
                            <td><strong>集合加法</strong></td>
                            <td>向集合中加入另一个集合的内容</td>
                            <td><code>Z==C&lt;&lt;V</code>（向C中加入V的内容，结果Z=={a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}）
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="note">
                <strong>注意：</strong>集合运算符仅限于在规则的局部集合定义中使用 ，不能在全局集合定义中使用。全局集合只支持<code>{a,b,c}</code>这样的字面值定义格式。
            </div>

            <h3>2.5 字面集合</h3>

            <p>使用大括号<code>{ }</code>表示字面集合，用于表示字符或字符串集合。（如<code>{,}</code> - 表示空字符、<code>{bl,br}</code>）</p>
            <ul>
                <li>只能用于集合定义或集合运算。</li>
            </ul>

            <h3>2.6 字面字符</h3>

            <p>使用双引号<code>" "</code>表示字面字符，用于表示具体的字符或字符串。（如<code>"e"</code>、<code>"tion"</code>）</p>
            <ul>
                <li>只能用于普通规则匹配，等同于单元素集合。</li>
                <li>字面字符大小写敏感。</li>
            </ul>

            <h2>3. 筛选规则</h2>

            <p><strong>本质</strong>：基于<span style="color: red;">普通规则</span>或<span
                    style="color: red;">组合规则</span>得出的，用于匹配单词库内单词的<span style="color: red;">字符串集合</span>。</p>
            <h3>3.1 普通规则</h3>

            <p><strong>格式</strong>：以<code>:</code>开头，由位置标志（锚点）、集合组合而成。（如：<code>:\bLV</code>表示匹配前缀是任意字母+元音的单词）
            </p>

            <p><strong>特殊情况</strong>：<code>:</code>后为空时表示匹配全部单词，但必须保留<code>:</code>符号。</p>

            <h4>3.1.1 位置标志</h4>
            <p>用于指定匹配时的位置锚点：</p>

            <ul>
                <li><code>\b</code> - 单词开头</li>
                <li><code>\e</code> - 单词结尾</li>
                <li><code>\-b</code> - 不在开头</li>
                <li><code>\-e</code> - 不在结尾</li>
            </ul>

            <h4>3.1.2 可引用的集合</h4>
            <ul>
                <li>全局集合（如：C、V、L）</li>
                <li>局部集合（当前规则中定义的）</li>
                <li>字面字符（如："e"、"tion"）</li>
            </ul>

            <div class="note">
                <strong>注意</strong>：多字母集合名必须用<code>()</code>引用；引用集合时大小写敏感。
            </div>

            <h4>3.1.3 集合内元素匹配优先级</h4>
            <ul>
                <li>优先尝试非空字符串匹配。</li>
                <li>最后尝试空字符串匹配。</li>
            </ul>

            <h4>3.1.4 集合量词</h4>
            <ul>
                <li>可以用<code>+</code>表示"一个或多个"相同的集合。（如：<code>CV+C</code>等同于<code>CVC</code>、<code>CVVC</code>、<code>CVVVC</code>...简写）
                </li>
                <li>小技巧：可以通过和集合定义配合，实现复杂匹配。（如：<code>xL==L<<{,}</code>\n<code>:\bC(xL)+"tion"\e</code>表示匹配辅音开头，中间可以有任意多个字母，最后以tion结尾的单词）
                </li>
            </ul>

            <h3>3.2 组合规则</h3>

            <p><strong>格式</strong>：以<code>::</code>开头，由规则名、运算符组合而成。（如：<code>::A||B</code>表示匹配满足A规则或B规则的单词）
            </p>
            <ul>
                <li>规则名必须完全匹配。</li>
                <li>只能引用已由普通规则创建的规则。</li>
                <li>不允许引用由组合规则创建的规则，即不允许嵌套。</li>
                <li>相关运算符只能用于组合规则，不能用于普通规则。</li>
            </ul>

            <h4>3.2.1 运算符</h4>

            <div class="table-wrapper">
                <table class="operator-table">
                    <thead>
                        <tr>
                            <th style="width: 12%;">符号</th>
                            <th style="width: 12%;">名称</th>
                            <th style="width: 12%;">操作数</th>
                            <th style="width: 12%;">优先级</th>
                            <th style="width: 12%;">结合律</th>
                            <th style="width: 40%;">描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>~</code></td>
                            <td>取反</td>
                            <td>一元</td>
                            <td>4</td>
                            <td>右</td>
                            <td>对规则结果取反</td>
                        </tr>
                        <tr>
                            <td><code>!</code></td>
                            <td><span style="color: red;">差集</span></td>
                            <td>二元</td>
                            <td>3</td>
                            <td>左</td>
                            <td>满足前者但不满足后者</td>
                        </tr>
                        <tr>
                            <td><code>&amp;&amp;</code></td>
                            <td>与</td>
                            <td>二元</td>
                            <td>2</td>
                            <td>左</td>
                            <td>同时满足两个条件</td>
                        </tr>
                        <tr>
                            <td><code>||</code></td>
                            <td>或</td>
                            <td>二元</td>
                            <td>1</td>
                            <td>左</td>
                            <td>满足任一条件</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="note">
                <strong>注意：</strong><code>!</code>
                是二元差集运算符，并不是编程语言中<span style="color: red;">逻辑非</span>概念，不支持<code>!A</code>写法。
            </div>

            <h4>3.2.2 优先级与结合律</h4>
            <ul>
                <li>优先级从高到低：<code>~</code>、<code>!</code>、<code>&&</code>、<code>||</code>（如：<code>A||B&&C!~D</code>
                    会被解析为<code>A||(B&&(C!(~D)))</code>）</li>
                <li><code>~</code>是右结合。（如：<code>~A~B</code>会被解析为<code>~(A~B)</code>，而不是<code>(~A)~B</code>）
                </li>
                <li><code>!</code>、<code>&&</code>、<code>||</code>是左结合。（如：<code>A&&B&&C</code>会被解析为<code>(A&&B)&&C</code>）
                </li>
                <li>可以使用<code>()</code>改变运算顺序。如：
                    <ul>
                        <li><code>~A&&B</code>会先对A取反，然后与B进行与运算。</li>
                        <li><code>~(A&&B)</code>会先计算<code>A&&B</code>，然后对整个结果取反。</li>
                    </ul>
                </li>
            </ul>

            <h2>4. 排序规则</h2>
            <p><strong>本质</strong>：对<span style="color: red;">筛选结果中的单词</span>的再<span style="color: red;">分组</span>与<span
                    style="color: red;">排序</span>。</p>
            <p><strong>格式</strong>：以<code>@</code>或<code>@@</code>开头，由分组开关、排序单元组合而成。</p>
            <p>根据排序标志的不同，又可分为宽松排序（以<code>@</code>开头）、严格排序（以<code>@@</code>开头）。</p>

            <h3>4.1 排序单元</h3>
            <p><strong>格式</strong>：由集合名、逆序标志和位置匹配符组合而成。</p>
            <ul>
                <li>单字母集合可以直接引用。（如：<code>V</code>或<code>(V)</code>）</li>
                <li>多字母集合名必须用括号引用。（如：<code>(BL)</code>）</li>
            </ul>

            <h4>4.1.1 逆序标志</h4>
            <ul>
                <li>可选的逆序标志<code>-</code>放在集合名前。（如：<code>-A</code>）</li>
                <li>集合引用如果有括号，逆序标志括号内外都可。（如：<code>(-A)</code>或<code>-(A)</code>）</li>
            </ul>

            <h4>4.1.2 位置匹配符</h4>
            <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                <thead>
                    <tr style="background-color: #f8f9fa;">
                        <th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">符号
                        </th>
                        <th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">名称
                        </th>
                        <th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">描述
                        </th>
                        <th style="border: 1px solid #dee2e6; padding: 8px; text-align: left;">示例
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>^</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">前缀匹配</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">元素必须出现在单词开头</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>V^</code>匹配以元音开头
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>$</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">后缀匹配</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">元素必须出现在单词结尾</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>C$</code>匹配以辅音结尾
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>*</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">任意位置</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">元素可以出现在单词任意位置</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>V*</code>匹配包含元音
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>~</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">严格中间</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">元素必须出现在单词中间（不在首尾）</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">
                            <code>V~</code>匹配中间包含元音但首尾不是元音
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">无符号</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">等同于<code>*</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"></td>
                    </tr>
                </tbody>
            </table>

            <ul>
                <li>可选的位置匹配符放在集合名后。（如：<code>A^</code>）</li>
                <li>集合引用如果有括号，匹配符必须放在括号内。（如：<code>(A^)</code>）</li>
            </ul>

            <div class="note">
                <strong>注意：</strong>严格中间位置匹配符<code>~</code>与组合规则中取反运算符<code>~</code>的区别。
            </div>

            <h4>示例：</h4>
            <p><code>-A^</code>，表示从筛选结果中，匹配前缀（<code>^</code>）为A集合中元素的单词，按集合A中的元素逆序（<code>-</code>）分组排列。</p>

            <h3>4.2 分组开关</h3>
            <p>可以使用<code>!</code>分割排序单元，表示不继续按<code>!</code>后的排序单元分组。（如：<code>@A!B</code>表示按A分组，但B仅用于排序不再分组）</p>

            <ul>
                <li>最多只能有一个分组开关。</li>
                <li><code>!</code>只能放在排序标志与排序单元或排序单元与排序单元间。（如：<code>@!-</code>、<code>@!A</code>或<code>@A!BC</code>、<code>@AB!(-C)</code>）
                </li>
            </ul>

            <div class="note">
                <strong>注意：</strong>分组开关<code>!</code>与组合规则中差集运算符<code>!</code>的区别。
            </div>

            <h3>4.3 通用逻辑</h3>

            <h4>4.3.1 匹配逻辑</h4>
            <p><span style="color: red;">逐级</span>、<span style="color: red;">按序</span>用排序单元引用的集合中的元素对筛选结果中的单词进行匹配。</p>

            <ul>
                <li><strong>逐级</strong>：排序单元之间隐含前后关系，前一个单元在后一个单元之前。</li>
                <li><strong>依序</strong>：根据排序单元的逆序标志，决定在该级内正序或逆序匹配。</li>
                <li><strong>特殊情况</strong>：如果没有排序单元，则全部匹配。</li>
                <li>宽松模式下，不要求各级排序单元紧邻。（如<code>@ABC</code>，即在单词中先后出现A集合中元素、B集合中元素、C集合中元素即可，不要求ABC元素紧邻）</li>
                <li>严格模式下，必须要求两级单元紧邻。（如<code>@@AB</code>，即在单词中先后出现的A、B集合中元素必须紧邻。）</li>
            </ul>

            <div class="note">
                <strong>注意：</strong>排序匹配是对筛选结果中的单词再次匹配，只会在筛选结果中进行。
            </div>

            <h4>4.3.2 分组逻辑</h4>
            <p><span style="color: red;">逐级</span>、<span
                    style="color: red;">按序</span>用排序单元引用的集合中的元素组成树状结构，并将满足匹配条件的单词放入该组。</p>

            <ul>
                <li>未分组的单词会放到"其他"分组，"其他"分组始终排在各组最后。</li>
                <li><strong>分组开关</strong>：分组开关会截断分组，即分组开关后的树状结构不再展开。</li>
                <li><strong>特殊情况</strong>：如果没有排序单元且没有分组开关则按首字母分组；如果没有排序单元但有分组开关则不分组。</li>
            </ul>

            <div class="note">
                <strong>注意：</strong>分组开关只是截断分组，并不截断排序。
            </div>

            <h4>4.3.3 分组标签</h4>
            <p><strong>标签格式</strong>：</p>

            <ul>
                <li>单级：<code>集合元素</code> （如：<code>"a"</code>、<code>"bl"</code>）</li>
                <li>两级：<code>一级标签 > 二级标签</code> （如：<code>"bl > a"</code>）</li>
                <li>三级：<code>一级标签 > 二级标签 > 三级标签</code> （如：<code>"bl > a > t"</code>）</li>
            </ul>

            <h4>4.3.4 组内排序</h4>

            <ul>
                <li>没有排序单元时，组内单词排序受逆序标志影响。</li>
                <li>有排序单元时，组内单词按字母正序排列。</li>
                <li><strong>特殊情况</strong>：有排序单元但在第一个单元前就有分组开关，等同于<code>@!</code>，即没有排序单元、没有逆序标志，组内单词按字母正序排列。</li>
            </ul>

            <h3>4.4 宽松排序</h3>
            <p><strong>格式</strong>：以<code>@</code>开头，由分组开关、0-3个排序单元组合而成。</p>

            <p>根据排序单元数量不同，又可分为：</p>

            <ul>
                <li>基础排序（0个排序单元）</li>
                <li>单级排序（1个排序单元）</li>
                <li>多级排序（2-3个排序单元）</li>
            </ul>

            <h4>4.4.1 基础排序</h4>

            <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                <thead>
                    <tr style="background-color: #f8f9fa;">
                        <th style="width: 20%; border: 1px solid #dee2e6; padding: 8px; text-align: left;">排序规则
                        </th>
                        <th style="width: 40%; border: 1px solid #dee2e6; padding: 8px; text-align: left;">分组标签
                        </th>
                        <th style="width: 40%; border: 1px solid #dee2e6; padding: 8px; text-align: left;">组内排序
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>@</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">首字母正序</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">字母正序</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>@-</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">首字母倒序</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">字母倒序</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>@!</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">不分组</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">字母正序</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 8px;"><code>@!-</code></td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">不分组</td>
                        <td style="border: 1px solid #dee2e6; padding: 8px;">字母倒序</td>
                    </tr>
                </tbody>
            </table>

            <ul>
                <li>特殊情况：无排序标志等同于<code>@</code>。</li>
            </ul>

            <h3>4.5 严格排序</h3>
            <p><strong></strong>格式</strong>：以<code>@@</code>开头，由分组开关和2个排序单元组成。</p>

            <ul>
                <li>严格排序<span style="color: red;">有且只有</span>两个排序单元。</li>
                <li>严格模式下两个排序单元只（按第一个）产生一级分组。</li>
                <li>严格排序如果需要不分组，可使用分组开关<code>!</code>（默认字母顺序）。且只能放在排序标志与排序单元之间；放在排序单元与排序单元间无效。（如：<code>@@!AB</code>；<code>@@A!B</code>无效）
                </li>
            </ul>

            <h2>5. 规则示例</h2>

            <h3>5.1 集合运算示例</h3>

            <p class="comment">/* 局部集合定义 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#特殊辅音组合</span>
<span class="comment">//短元音（去掉u）</span>
<span class="set-definition">BL=={bl,br,cl,cr,dr,fl,fr,gl,gr,pl,pr,sc,sk,sl,sm,sn,sp,st,sw,tr,tw}</span>
<span class="set-definition">ShortV==V>>{u}</span>
<span class="rule-content">:\b(BL)(ShortV)</span>
<span class="sort-rule">@(BL^)</span></pre>

            <h3>5.2 普通规则示例</h3>

            <p class="comment">/* 最简写法 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#All单词音标</span>
<span class="rule-content">:</span></pre>

            <p class="comment">/* 位置标志、所有单词 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#All单词</span>
<span class="comment">//所有单词</span>
<span class="rule-content">:\bL</span>
<span class="sort-rule">@</span></pre>

            <p class="comment">/* 前缀+字面后缀 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#前缀匹配</span>
<span class="comment">//匹配前缀+tion后缀单词</span>
<span class="set-definition">PRE=={a,ab,ac,ad,ag,al,ambl,auto,bene,cata,col,com,con,contra,dia,dif,dis,ef,em,en,entra,fore,inter,micro,mis,ob,oc,post,pre,semi,sub,un,with}</span>
<span class="rule-content">:\b(PRE)L+"tion"\e</span>
<span class="sort-rule">@(PRE^)</span></pre>


            <h3>5.3 基础排序示例</h3>

            <p class="comment">/* 无分组排序 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#无分组正序</span>
<span class="comment">//匹配所有单词，按字母顺序排列但不分组</span>
<span class="rule-content">:</span>
<span class="sort-rule">@!</span></pre>

            <p class="comment">/* 无分组逆序 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#无分组逆序</span>
<span class="comment">//匹配所有单词，按字母逆序排列但不分组</span>
<span class="rule-content">:</span>
<span class="sort-rule">@!-</span></pre>

            <h3>5.4 单级排序示例</h3>

            <p class="comment">/* 前缀匹配 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#元音开头</span>
<span class="comment">//按开头元音分组</span>
<span class="rule-content">:\bV</span>
<span class="sort-rule">@V^</span></pre>

            <p class="comment">/* 后缀匹配 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#辅音结尾</span>
<span class="comment">//按结尾辅音分组</span>
<span class="rule-content">:C\e</span>
<span class="sort-rule">@C$</span></pre>

            <p class="comment">/* 任意位置匹配 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#包含元音</span>
<span class="comment">//按包含的元音分组</span>
<span class="rule-content">:V</span>
<span class="sort-rule">@V*</span></pre>

            <p class="comment">/* 严格中间匹配 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#中间元音</span>
<span class="comment">//按中间元音分组（首尾不是元音）</span>
<span class="rule-content">:\bCV+C\e</span>
<span class="sort-rule">@V~</span></pre>

            <h3>5.5 多级排序示例</h3>

            <p class="comment">/* 逆序排序示例 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#逆序多级</span>
<span class="comment">//第一级逆序，第二级正序</span>
<span class="set-definition">BL=={bl,br,cl,cr,dr,fl,fr,gl,gr,pl,pr,sc,sk,sl,sm,sn,sp,st,sw,tr,tw}</span>
<span class="rule-content">:\b(BL)V</span>
<span class="sort-rule">@(-BL^)(V*)</span></pre>

            <p class="comment">/* 三级排序：开头 + 中间 + 结尾 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#完整音韵分析</span>
<span class="comment">//按开头辅音群、中间元音、结尾辅音三级分组</span>
<span class="set-definition">BL=={bl,br,cl,cr,dr,fl,fr,gl,gr,pl,pr,sc,sk,sl,sm,sn,sp,st,sw,tr,tw}</span>
<span class="rule-content">:\b(BL)VC</span>
<span class="sort-rule">@(BL^)(V*)(C$)</span></pre>

            <h3>5.6 严格排序示例</h3>

            <p class="comment">/* 严格排序，开关忽略 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#混合分组</span>
<span class="comment">//只分组前缀是严格辅音+元音结构单词，按辅音开头分组，二级分组无效</span>
<span class="rule-content">:\bCV</span>
<span class="sort-rule">@@C^!V*</span></pre>

            <h3>5.7 组合规则示例</h3>

            <p class="comment">/* 组合规则：元音开头且辅音结尾 */</p>
            <pre><button class="copy-btn" onclick="copyCode(this)">复制</button><span class="rule-name">#元音开头且辅音结尾</span>
<span class="comment">//匹配元音开头且辅音结尾的单词</span>
<span class="rule-content">::元音开头&&辅音结尾</span>
<span class="sort-rule">@</span></pre>
        </div>
    </div>

    <script>
        function copyCode(button) {
            const pre = button.parentElement;
            const code = pre.textContent.replace('复制', '').trim();

            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = '已复制';
                button.style.background = '#48bb78';

                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#4a5568';
                }, 2000);
            }).catch(err => {
                console.error('复制失败:', err);
                alert('复制失败，请手动选择文本复制');
            });
        }
    </script>
</body>

</html>