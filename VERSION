# 单词筛选工具版本历史

## 版本 v1.2.8 (2025-06-10)
- 修复严格中间匹配符(~)的位置指针逻辑，确保从正确位置开始搜索
- 统一默认位置匹配符为*，简化排序规则的使用
- 移除多级排序必须显式指定位置标识符的限制，适应默认位置匹配符统一为*的修改
- 修复严格排序模式下的其他分组逻辑，确保即使紧邻匹配失败也能正确分组第一个元素
- 修复严格排序模式下分组开关的降序处理逻辑，避免重复处理降序键
- 提升排序规则的准确性和一致性，改善用户体验

## 版本 v1.2.7 (2025-06-10)
- 修复规则引擎回溯算法关键bug：字符消耗验证缺失
- 解决多量词规则匹配时部分字符被忽略的问题
- 完善matchWithBacktrack函数，确保模式匹配完成时验证所有字符都被消耗
- 修复规则如:\b(PRE)L+V"tion"\e对单词"attention"的错误匹配
- 提升规则引擎匹配准确性和完整性
- 添加详细的调试日志输出，便于问题诊断

## 版本 v1.2.6 (2025-06-10)
- 完善预处理模块中音标检查功能，实现严格的英语IPA音标验证
- 严格化单词验证规则，限制为26个大小写字母、连字符、缩写点、所有格及指定变音符号
- 修复音标字符集缺失θ、ð、ŋ等IPA符号的问题
- 增加音标长度限制从50字符扩展到100字符，支持长音标识别
- 添加音标混用检测，禁止ː与:、ˈ与'在同一音标内混用
- 预处理模块测试通过，提升文本处理准确性

## 版本 v1.2.5 (2025-06-09)
- 修复test.html中FileStorageManager未定义的错误
- 修复模块3清空按钮逻辑，现在只清空内容而不删除已创建的textarea
- 优化测试页面的用户体验和功能稳定性

## 版本 v1.2.4 (2025-06-08)
- 优化搜索框显示逻辑，搜索框现在默认隐藏
- 只有在有筛选结果时才显示搜索框，提升用户体验
- 调整搜索框位置到统计信息和结果容器之间

## 版本 v1.2.3 (2025-06-07)
- 完成页面检查和代码清理工作
- 清理临时测试文件和开发文件
- 扩展双引号功能支持多字符字符串匹配
- 优化规则引擎核心匹配逻辑

## 版本 v1.2.2 (2025-06-06)
- 整理了相关功能和测试文档结构
- 完成全部主要页面的基础文字检查
- 优化项目文件组织结构

## 版本 v1.2.1 (2025-06-05)
- 修复和完善详细语法帮助页面，统一运算符优先级、结合律、括号说明
- 修正所有已知文档BUG，细化排序规则与组合规则的用法说明

## 版本 v1.2.0 (2025-06-04)

### 排序功能重新设计
- **多级排序顺序约束**：
  - 实现多级排序的位置约束逻辑，确保后一级匹配位置在前一级之后
  - 添加带位置约束的匹配方法 `findMatchingSetElementWithPosition`
  - 支持四种位置标识符的约束逻辑（^前缀、$后缀、*包含、~严格中间）
  - 优化排序处理逻辑，分离有效和无效单词

- **位置标识符功能完善**：
  - 修正 `~` 标识符实现为严格中间匹配
  - 更新语法帮助文档中的位置标识符说明和示例
  - 保持向后兼容性

### 创建规则有效性检查完善
- **规则验证增强**：完善规则创建时的有效性检查机制
- **错误处理优化**：改进规则解析和验证的错误提示
- **用户体验提升**：提供更清晰的规则创建指导

### 文档整理
- **文档结构优化**：保留核心设计文档，清理冗余文档
- **语法帮助更新**：修正CVCE模式示例注释
- **技术文档完善**：更新排序规则设计方案

## 版本 v1.1.9 (2025-06-04)

### 版本发布
- **代码整理**：整理项目代码结构和文档
- **版本管理**：更新版本号和发布日期
- **文档更新**：同步更新相关文档

## 版本 v1.1.8 (2025-06-03)

### 首页功能完善
- **折叠展开功能优化**：
  - 为筛选结果区的排序标签添加折叠功能和三角箭头
  - 修复所有层级的三角按钮旋转问题
  - 改进按钮配色为纯黑色，提高可见性
  - 调整按钮位置到标题最前方，优化垂直居中对齐
  - 使用CSS伪元素实现，简化HTML结构

- **删除恢复功能改进**：
  - 移除恢复图标上的删除线，保持按钮清晰
  - 优化删除线仅显示在单词文本上，不影响按钮显示
  - 保持红色背景和边框的视觉提示效果

- **布局优化**：
  - 调整word-group div的下边距为10px，使布局更紧凑
  - 修复word-item在数量不足时被拉伸的问题
  - 使用auto-fill和max-content确保单词项宽度一致
  - 优化响应式布局，在不同屏幕尺寸下保持良好显示

### 用户体验提升
- **视觉一致性**：统一折叠按钮样式，避免字符大小差异
- **交互优化**：保持折叠展开功能正常，仅调整视觉表现
- **布局改进**：解决单词项拉伸问题，保持网格布局整齐

## 版本 v1.1.7 (2025-06-02)

### 功能优化
- **分组拖拽功能移除**：
  - 移除规则分组的拖拽移动功能，简化界面交互
  - 保留单词显示分组功能（按首字母、按集合规则分组）
  - 清理相关CSS样式和JavaScript代码
  - 修复移除过程中产生的语法错误

### 代码质量提升
- **错误修复**：
  - 修复JavaScript中const变量重新赋值错误
  - 修复CSS语法错误（孤立属性）
  - 清理无用的分组拖拽相关代码

### 文档整理
- **项目文档更新**：
  - 整理开发规划和需求文档
  - 更新版本信息和变更日志
  - 完善技术文档结构

## 版本 v1.1.6 (2025-06-01)

### 功能修复
- **排序功能修复**：
  - 修复@-逆序排序功能无效的问题
  - 在groupWordsByFirstLetter方法中添加对@-和@排序规则的正确处理
  - 确保@和@-规则产生不同的排序结果
  - 优化排序逻辑，使用ruleEngine.applySorting方法处理排序

### 技术改进
- **代码优化**：
  - 限制排序分级最多三级，提高系统稳定性
  - 完善排序规则解析和错误处理机制
  - 更新相关文档和注释说明

## 版本 v1.1.5 (2025-06-01)

### 用户界面优化
- **规则管理页面增强**：
  - 新增"收缩/展开全部"按钮，支持批量管理已保存规则的显示状态
  - 实现规则展开/收缩状态的本地持久化存储
  - 优化规则项HTML结构，增加data-rule-id属性支持
  - 修复CSS样式问题，确保收缩展开功能正常工作
  - 提升大量规则管理的用户体验和操作便捷性

## 版本 v1.1.4 (2025-06-01)

### 问题修复
- **JavaScript语法错误修复**：
  - 修复ruleEngine.js第875行的换行符转义语法错误
  - 解决"Invalid or unexpected token"错误
  - 修正getRulePreview函数中的字符串拼接格式
  - 确保所有JavaScript文件正常加载和执行

## 版本 v1.1.3 (2025-06-01)

### 问题修复
- **规则预览同步问题修复**：
  - 修复规则预览中全局集合定义与规则管理不同步的问题
  - 在showRulePreview函数中添加重新加载全局集合的调用
  - 确保规则预览显示最新的全局集合配置
- **滚动条位置重置功能**：
  - 修复更换筛选模式后预览区滚动条不重置的问题
  - 在displayResults函数中添加scrollTop = 0重置功能
  - 提升用户浏览筛选结果的体验
- **全局集合默认配置优化**：
  - 从ruleEngine.js中移除N集合的默认定义
  - 确保全局集合定义与规则管理页面完全一致
  - 解决N集合意外显示的问题

### 新增规则框优化
- **自动格式化功能**：
  - 实现粘贴代码后自动格式化
  - 解决从示例复制代码到新增规则框时格式混乱的问题
  - 保留手动格式化按钮功能
  - 使用延迟执行确保粘贴内容完全插入后再格式化

### 技术改进
- **代码同步机制增强**：优化规则预览与规则管理的数据同步
- **用户体验提升**：改善代码输入和结果浏览的交互体验
- **数据一致性保障**：确保不同页面间的全局集合定义保持一致

## 版本 v1.1.2 (2025-05-30)

### 功能增强
- **规则示例区交互优化**：
  - 新增"收缩/展开全部"按钮，支持一键操作所有示例
  - 实现响应式自动收缩：宽屏切换到窄屏时自动收缩所有示例
  - 优化示例间距：将垂直间距调整为0，提供更紧凑的布局
  - 修正"四字母及以上单词"示例中的错误单词
  - 智能按钮状态同步：根据示例展开/收缩状态自动更新按钮文本
  - 保持用户偏好设置的持久化存储功能

## 版本 v1.1.1 (2025-05-30)

### 界面优化
- **规则示例重构**：完全重新设计规则管理器中的示例展示格式
  - 调整示例顺序，将"四字母及以上单词"示例移至首位
  - 统一使用"功能"、"语法"、"集合"、"示例"等标准化字段
  - 为每个规则添加具体的单词示例（如cat, dog, run, big等）
  - 实现代码语法高亮：注释绿色、集合定义粉色、规则蓝色、显示黄色
  - 采用深色代码背景，提升代码可读性
  - 优化代码布局，每行独立显示，增强视觉效果

### 用户体验提升
- **示例内容丰富化**：每个规则示例都包含8个具体单词，便于理解和学习
- **视觉层次优化**：使用清晰的字段标签和适当间距，提升信息层次感
- **语法说明完善**：保留重要的语法提示和注释，帮助用户掌握规则编写

## 版本 v1.1.0 (2025-05-30)

### 重大更新
- **项目整理**：清理了不必要的测试文件和临时文档
- **文档完善**：更新了开发实施计划和需求分析文档，标记已完成功能
- **版本升级**：基于已完成的核心功能，升级到1.1.0版本

### 已完成的核心功能
- ✅ **筛选结果预处理（删除）功能**：完整的单词删除、恢复和批量操作
- ✅ **规则注释功能**：支持60字符规则注释，提升规则管理体验
- ✅ **组合规则非模式**：支持"--"操作符，实现"满足A但不满足B"的逻辑
- ✅ **导出信息增强**：导出文件包含完整的源文件和规则信息

### 保留文件
- `debug.html`：开发调试工具，用于检查规则数据和测试RuleEngine

---

## 版本 v1.0.4 (2025-05-30)

### 核心功能
- **规则注释功能**：为筛选规则添加描述性注释，提升规则管理的便利性
  - 支持在规则编辑器中添加最多60字符的注释
  - 规则列表中美观显示注释信息
  - 主页面规则选择下拉框显示注释预览（超过20字符自动截取）
  - 编辑规则时自动填入现有注释
  - 导出/导入规则功能完整支持注释信息
  - 注释采用 `//` 前缀，符合代码注释的视觉习惯

### 技术改进
- 扩展规则数据结构，新增 `comment` 字段
- 优化规则解析逻辑，支持注释行的识别和处理
- 完善文件存储功能，确保注释信息的完整保存和加载

---

## 版本 v1.0.3 (2025-05-30)

### 核心功能
- **筛选结果预处理功能**：实现了完整的单词删除、恢复和清除功能
- 每个筛选结果单词旁添加删除/恢复按钮，支持精确的单词级操作
- 批量操作功能：全部删除、全部恢复、清除已删除单词
- 实时统计更新：动态显示已删除单词数量和有效单词数量
- 智能导出：导出时自动排除已删除单词，确保结果准确性

### UI/UX优化
- 修正预览区按钮间距问题：优化删除类与导出类按钮的分类间距
- 按钮颜色语义化：统一删除类按钮为灰色，编辑类按钮为蓝色，帮助类按钮为绿色
- 提升用户界面的可用性和视觉一致性

### 技术实现
- 新增deletedWords Set数据结构，高效管理删除状态
- 实现toggleWordDelete、deleteAllWords、restoreAllWords、clearDeleted等核心方法
- 扩展getActiveWords方法，支持获取有效（未删除）单词列表
- 优化消息提示系统，提供操作反馈

---

## 版本 v1.0.2 (2025-05-30)

### 新增功能
- 导出信息增强：在导出文件头部添加完整的源文件信息、筛选规则信息和生成时间
- 支持TXT和Excel两种格式的头部信息显示
- 增强导出文件的可追溯性，便于用户管理和识别导出结果

### 功能优化
- 优化导出文件的信息展示格式
- 提升用户对导出结果的理解和管理能力

---

## 版本 v1.0.1 (2025-05-30)

### 新增功能
- **组合规则非模式**：新增"--"操作符支持
  - 实现"满足条件A但不满足条件B"的逻辑运算
  - 支持与现有&&（逻辑与）、||（逻辑或）操作符的组合使用
  - 完善的语法解析和错误处理机制

### 技术实现
- 扩展RuleEngine类，新增processNonOperator方法
- 优化组合规则解析逻辑，支持复杂的逻辑表达式
- 更新规则管理页面的示例说明，包含所有操作符的使用方法

### 文档更新
- 更新组合规则示例，详细说明三种操作符的用法
- 完善技术文档，提供清晰的使用指南

---

## 版本 v1.0.0 (2025-05-30)

### 核心功能
- 基础单词筛选功能
- 规则管理系统
- 文件导入导出
- 基础组合规则（&&、||操作符）
- 全局集合定义
- 规则预览和测试

### 技术架构
- 模块化JavaScript架构
- localStorage数据持久化
- 响应式UI设计
- 完整的错误处理机制